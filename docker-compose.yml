# [MASTER COMPOSE]
# Этот файл объединяет все микросервисы проекта в единый стек.
# Использует механизм 'include', доступный в Docker Compose v2.20+.
#
# ЗАПУСК:
# docker compose up -d

# Подключаем композ-файлы из подпапок.
# Порядок не важен для запуска, но важен для понимания структуры.
include:
  # 1. Приложение (FastAPI)
  - path:
      - app-stack/docker-compose.yml

  # 2. Мониторинг (Prometheus, Grafana, Alertmanager)
  - path:
      - prometheus-stack/docker-compose.yml

  # 3. База данных (Postgres)
  - path:
      - postgres-stack/docker-compose.yml

  # 4. Веб-сервер (Nginx - входная точка)
  - path:
      - nginx-stack/docker-compose.yml

  # 5. Агент мониторинга контейнеров (cAdvisor)
  - path:
      - cadvisor-stack/docker-compose.yml
